<!DOCTYPE html>
<html>
  <head>
    <title>great</title>
    <link rel="icon"href="icon.png.png">
  </head>
  <body>
<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>Maze Game</title>
<style>
    body { margin:0; overflow:hidden; background:black; }
    canvas { display:block; }
</style>
</head>
<body>

<canvas id="game"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

const TILE = 32;

let maze = [
    "WWWWWWWWWWWWWWWWWWWW",
    "W       W          W",
    "W WWWWW W WWWWWW   W",
    "W W   W W      W   W",
    "W W G W W  G   W   W",
    "W W   W W      W   W",
    "W WWWWW WWWWWW W   W",
    "W                G W",
    "W   WWWW   WWWW    W",
    "W   W        W     W",
    "W   W   G    W     W",
    "W   W        W     W",
    "W   WWWW   WWWW    W",
    "W                  W",
    "W     G            W",
    "W                  W",
    "W             G    W",
    "W                  W",
    "W         G        W",
    "WWWWWWWWWWWWWWWWWWWW"
];

let player = { x:1, y:1 };

let ghosts = [];
for (let y=0; y<maze.length; y++) {
    for (let x=0; x<maze[y].length; x++) {
        if (maze[y][x] === "G") {
            ghosts.push({x, y});
        }
    }
}

let keys = {};
window.addEventListener("keydown", e => keys[e.key] = true);
window.addEventListener("keyup", e => keys[e.key] = false);

function movePlayer() {
    let nx = player.x;
    let ny = player.y;

    if (keys["ArrowUp"]) ny--;
    if (keys["ArrowDown"]) ny++;
    if (keys["ArrowLeft"]) nx--;
    if (keys["ArrowRight"]) nx++;

    if (maze[ny][nx] !== "W") {
        player.x = nx;
        player.y = ny;
    }
}

function moveGhosts() {
    ghosts.forEach(g=>{
        let dx = player.x - g.x;
        let dy = player.y - g.y;

        if (Math.abs(dx) > Math.abs(dy)) {
            g.x += Math.sign(dx);
        } else {
            g.y += Math.sign(dy);
        }

        // 阻擋穿牆
        if (maze[g.y][g.x] === "W") {
            // 走不動就不動
            if (Math.abs(dx) > Math.abs(dy)) g.x -= Math.sign(dx);
            else g.y -= Math.sign(dy);
        }
    });
}

function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // --- CAMERA FOLLOW ---
    let camX = player.x * TILE - canvas.width / 2;
    let camY = player.y * TILE - canvas.height / 2;

    camX = Math.max(0, Math.min(camX, maze[0].length*TILE - canvas.width));
    camY = Math.max(0, Math.min(camY, maze.length*TILE - canvas.height));

    // --- DRAW MAZE ---
    for (let y=0; y<maze.length; y++) {
        for (let x=0; x<maze[y].length; x++) {
            if (maze[y][x] === "W") {
                ctx.fillStyle = "#555";
                ctx.fillRect(x*TILE - camX, y*TILE - camY, TILE, TILE);
            }
        }
    }

    // --- DRAW PLAYER ---
    ctx.fillStyle = "cyan";
    ctx.fillRect(player.x*TILE - camX, player.y*TILE - camY, TILE, TILE);

    // --- DRAW GHOSTS ---
    ctx.fillStyle = "white";
    ghosts.forEach(g=>{
        ctx.beginPath();
        ctx.arc(g.x*TILE - camX + 16, g.y*TILE - camY + 16, 14, 0, Math.PI*2);
        ctx.fill();
    });

    // --- GAME LOGIC ---
    movePlayer();
    moveGhosts();

    requestAnimationFrame(draw);
}

draw();
</script>

</body>
</html>







</script>


