<!DOCTYPE html>
<html>
  <head>
    <title>great</title>
    <link rel="icon"href="icon.png.png">
  </head>
  <body>
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Labyrinth Hotel Escape - Web</title>
<style>
  body {
    margin: 0;
    background: #000;
    display: flex;
    height: 100vh;
    justify-content: center;
    align-items: center;
  }
  canvas {
    border: 3px solid #fff;
  }
</style>
</head>
<body>
<canvas id="game" width="640" height="640"></canvas>
<script>
// --- Maze Map (W = Wall, . = Floor, G = Goal) ---
const maze = [
  "WWWWWWWWWWWWWWWWWWWW",
  "W.........W.........W",
  "W.WWW.WWW.W.WWW.WWW.W",
  "W.WGW...W...W....W.WW",
  "W.WWW.WWWWW.WWWWW.W.W",
  "W.....W.....W.....W.W",
  "WWW.W.W.WWWWW.W.W.WWW",
  "W...W.W...W...W.W...W",
  "W.WWWWW.W.W.W.WWWWW.W",
  "W.......W...W.......W",
  "WWWWWWWWWWWWWWWWWWWWWW"
];

const TILE = 32;
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let player = { x: 1, y: 1 };
let ghost = { x: 10, y: 5, mode: "patrol", timer: 0 };

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  for (let y = 0; y < maze.length; y++) {
    for (let x = 0; x < maze[y].length; x++) {
      if (maze[y][x] === "W") {
        ctx.fillStyle = "#333";
        ctx.fillRect(x * TILE, y * TILE, TILE, TILE);
      } else if (maze[y][x] === "G") {
        ctx.fillStyle = "#0f0";
        ctx.fillRect(x * TILE, y * TILE, TILE, TILE);
      }
    }
  }

  // Player
  ctx.fillStyle = "#0ff";
  ctx.fillRect(player.x * TILE, player.y * TILE, TILE, TILE);

  // Ghost
  ctx.fillStyle = "#f00";
  ctx.fillRect(ghost.x * TILE, ghost.y * TILE, TILE, TILE);
}

function canMove(x, y) {
  return maze[y][x] !== "W";
}

// --- Player Move ---
document.addEventListener("keydown", (e) => {
  let nx = player.x;
  let ny = player.y;
  if (e.key === "ArrowUp") ny--;
  if (e.key === "ArrowDown") ny++;
  if (e.key === "ArrowLeft") nx--;
  if (e.key === "ArrowRight") nx++;

  if (canMove(nx, ny)) {
    player.x = nx;
    player.y = ny;
  }
});

// --- Ghost AI ---
function ghostAI() {
  ghost.timer++;

  // Simple chasing behavior every 20 frames
  if (ghost.timer % 20 === 0) {
    let dx = player.x - ghost.x;
    let dy = player.y - ghost.y;

    let mx = ghost.x + Math.sign(dx);
    let my = ghost.y + Math.sign(dy);

    if (Math.abs(dx) > Math.abs(dy)) {
      if (canMove(mx, ghost.y)) ghost.x = mx;
      else if (canMove(ghost.x, my)) ghost.y = my;
    } else {
      if (canMove(ghost.x, my)) ghost.y = my;
      else if (canMove(mx, ghost.y)) ghost.x = mx;
    }
  }
}

// --- Check Win & Lose ---
function checkState() {
  if (maze[player.y][player.x] === "G") {
    alert("你成功逃出鬼店！");
    reset();
  }

  if (player.x === ghost.x && player.y === ghost.y) {
    alert("你被惡鬼抓到了！");
    reset();
  }
}

function reset() {
  player = { x: 1, y: 1 };
  ghost = { x: 10, y: 5, timer: 0 };
}

function loop() {
  ghostAI();
  draw();
  checkState();
  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>


</script>


